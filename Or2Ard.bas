10 REM Simple transmitter of characters over I2C to Arduino and then to PC over USB
15 CLS : PRINT "Setting up assembly"
20 GOSUB 5000
30 REM SETUP ZP VARIABLES FOR I2C MODULE
40 DOKE #0,#6000: REM POINTER TO LOCATION OF TX/RX BUFFER
50 POKE 3,1:REM COUNT OF BYTES TO SEND (LOW BYTE)
60 POKE 4,0:REM COUNT OF BYTES TO SEND (HIGH BYTE) - ALWAYS 0 FOR NOW
70 POKE 5,0:REM SEND OR RECEIVE (0=SEND, 1=RECEIVE)
80 POKE 7,#4:REM ADDRESS IF I2C SLAVE (SET TO #4 IN ARDUINO CODE -CAN BE CHANGED)
85 PRINT "PRESS KEYS TO INPUT AND SEND"
90 A$=KEY$
100 IF A$="" THEN GOTO 90
110 POKE #6000,ASC(A$): REM PUT KEY INPUT INTO BUFFER
120 PRINT A$;
130 IF ASC(A$)=13 THEN PRINT : REM CHECK FOR CR
140 POKE 3,1:POKE 4,0: REM RESET BUFFER COUNTERS TO 1 (LOW) AND  0 (HIGH)
150 CALL #4000 : REM RUN I2C ROUTINE
160 GOTO 90
500 END
5000 ST=#4000
5010 EN=0
5030 REPEAT
5040 READ A$
5050 EN=EN+1
5060 UNTIL A$="END"
5070 EN=EN-1
5100 RESTORE
5110 FOR I= ST TO ST+EN-1
5120 READ J
5130 POKE I,J
5140 NEXT I
5160 RETURN
5199 END
5200 REM data 
5210 DATA 173,13,3,133,6,169,238,141
5220 DATA 13,3,169,255,141,3,3,141
5230 DATA 1,3,32,188,64,169,0,133
5240 DATA 4,32,58,64,165,5,208,6
5250 DATA 32,138,64,76,49,64,169,0
5260 DATA 32,216,64,32,97,64,32,164
5270 DATA 64,32,188,64,165,6,141,13
5280 DATA 3,96,173,1,3,9,1,141
5290 DATA 1,3,169,3,141,1,3,169
5300 DATA 1,44,1,3,240,251,169,2
5310 DATA 44,1,3,240,251,32,206,64
5320 DATA 165,7,42,32,216,64,176,92
5330 DATA 96,173,1,3,9,1,141,1
5340 DATA 3,169,3,141,1,3,169,1
5350 DATA 44,1,3,240,251,169,2,44
5360 DATA 1,3,240,251,32,206,64,165
5370 DATA 7,42,9,1,32,216,64,176
5380 DATA 51,96,230,4,160,0,177,0
5390 DATA 32,216,64,32,98,65,200,208
5400 DATA 2,230,1,198,3,208,239,198
5410 DATA 4,208,235,96,160,0,32,23
5420 DATA 65,165,2,145,0,32,61,65
5430 DATA 200,192,7,208,241,32,80,65
5440 DATA 32,188,64,96,169,0,141,1
5450 DATA 3,234,169,2,141,1,3,234
5460 DATA 169,3,141,1,3,96,141,1
5470 DATA 3,234,169,0,141,1,3,96
5480 DATA 133,2,162,8,169,0,38,2
5490 DATA 42,141,1,3,234,9,2,141
5500 DATA 1,3,169,2,44,1,3,240
5510 DATA 251,173,1,3,41,1,141,1
5520 DATA 3,202,208,224,169,1,141,1
5530 DATA 3,169,3,141,1,3,169,2
5540 DATA 44,1,3,240,251,173,1,3
5550 DATA 74,169,1,141,1,3,96,169
5560 DATA 0,133,2,162,8,169,1,141
5570 DATA 1,3,169,3,141,1,3,169
5580 DATA 2,44,1,3,240,251,173,1
5590 DATA 3,106,38,2,169,1,141,1
5600 DATA 3,202,208,230,96,169,0,141
5610 DATA 1,3,234,169,2,141,1,3
5620 DATA 234,169,0,141,1,3,234,96
5630 DATA 169,1,141,1,3,234,169,3
5640 DATA 141,1,3,234,169,1,141,1
5650 DATA 3,96,72,169,255,56,233,1
5660 DATA 208,252,104,96
9999 DATA "END"

